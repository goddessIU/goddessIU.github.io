import{u as R,p as Cs,k as Ds}from"./index.177b5f2a.js";import{_ as J,b as ks,r as C,f as a,g as d,h as s,e as o,j as l,y as _,l as x,E as k,F as B,N as Ss,o as ms,x as Ts,B as F,z as O,n as Fs,A as D,O as Os,p as ys,i as gs,T as fs}from"./vendor.6b481748.js";import{T as ws}from"./TipWindow.2f723dc0.js";import{J as Rs}from"./JumpWindow.b729407c.js";const Js={key:0},Ms={class:"addressBlock__bar"},Ns={key:0},Ps={key:1},Ws={key:1},qs=Ss('<div class="addAddress__showDefault" data-v-0accf4ef><div class="addAddress__icon" data-v-0accf4ef><svg class="icon" aria-hidden="true" data-v-0accf4ef><use xlink:href="#icon-address" data-v-0accf4ef></use></svg></div><div class="addAddress__content" data-v-0accf4ef>\u8BF7\u6DFB\u52A0\u4E00\u4E2A\u6536\u83B7\u5730\u5740</div><div class="addAddress__arrow" data-v-0accf4ef><svg class="icon" aria-hidden="true" data-v-0accf4ef><use xlink:href="#icon-right" data-v-0accf4ef></use></svg></div></div>',1),Es=[qs],Ls=l("\u8BF7\u5148\u767B\u5F55"),Vs={setup(i){const m=ks(),e=R();let h=C(!1);const v=()=>{if(!e.userData){h.value=!0;return}m.push({name:"chooseAddress"})};return(y,S)=>(a(),d(B,null,[s("div",{class:"addAddress",onClick:v},[o(e).finalAddress?(a(),d("div",Js,[s("div",Ms,[s("span",null,[l(_(o(e).finalAddress.name)+" ",1),o(e).finalAddress.sex===1?(a(),d("span",Ns,"\u5148\u751F")):(a(),d("span",Ps,"\u5973\u58EB")),l(" "+_(o(e).finalAddress.address),1)]),s("span",null,_(o(e).finalAddress.phone),1)])])):(a(),d("div",Ws,Es))]),x(ws,{show:o(h)},{content:k(()=>[Ls]),_:1},8,["show"])],64))}};var js=J(Vs,[["__scopeId","data-v-0accf4ef"]]);const bs=i=>(ys("data-v-007e83d8"),i=i(),gs(),i),Us={key:0,class:"block--mask"},zs={class:"block"},Gs=bs(()=>s("div",{class:"block__head"}," \u652F\u4ED8\u65B9\u5F0F ",-1)),Hs={class:"block__options"},Ks={class:"block__option"},Qs={class:"block__option__name"},Xs=bs(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-yes"})],-1)),Ys=[Xs],Zs={props:["show"],emits:["closeBlock"],setup(i,{emit:m}){const e=i,h=R(),v=y=>{y.target.className==="block--mask"&&m("closeBlock")};return ms(()=>{document.addEventListener("click",v)}),Ts(()=>{document.removeEventListener("click",v)}),(y,S)=>(a(),F(Os,{name:"fade"},{default:k(()=>{var $,g;return[e.show?(a(),d("div",Us,[s("div",zs,[Gs,s("div",Hs,[(a(!0),d(B,null,O((g=($=o(h))==null?void 0:$.orderData)==null?void 0:g.payments,(f,M)=>(a(),d("div",Ks,[s("div",Qs,[l(_(f.name),1),s("span",null,_(f.description),1)]),s("div",{class:Fs(["block__option__icon",{"block__option__icon--click":f.select_state===1}])},Ys,2)]))),256))])])])):D("",!0)]}),_:1}))}};var se=J(Zs,[["__scopeId","data-v-007e83d8"]]);const u=i=>(ys("data-v-045cff99"),i=i(),gs(),i),ee={class:"order__time"},oe=u(()=>s("div",{class:"order__time__title"},"\u9001\u8FBE\u65F6\u95F4",-1)),te={class:"order__time__content"},ae={class:"time__content__firstLine"},_e={key:0,class:"time__content__rule"},de=l(" | "),ne={class:"time__content__prediction"},re={class:"time__content__secondLine"},ce={key:0,class:"time__content__company"},ie={class:"order__pay"},le={class:"order__pay__way"},ue=u(()=>s("h3",null,"\u652F\u4ED8\u65B9\u5F0F",-1)),pe=u(()=>s("span",null,"\u5728\u7EBF\u652F\u4ED8",-1)),he=u(()=>s("span",null,[s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-right"})])],-1)),ve=[pe,he],fe=u(()=>s("div",{class:"order__pay__redBag"},[s("h3",null,"\u7EA2\u5305"),s("span",null,"\u6682\u65F6\u53EA\u652F\u6301\u5728\u997F\u4E86\u4E48APP\u4E2D\u652F\u4ED8")],-1)),ke={class:"order__detail"},me={class:"order__detail__storeInfo"},ye={class:"order__detail__bars"},ge={class:"order__detail__bar"},we={class:"order__detail__name"},be={class:"order__detail__num"},xe={class:"order__detail__money"},Be={class:"order__detail__fee"},$e={class:"order__detail__bar"},Ae=u(()=>s("span",{class:"order__detail__name"},"\u914D\u9001\u8D39",-1)),Ie={class:"order__detail__money"},Ce={class:"order__detail__bar"},De={class:"order__detail__name"},Se={class:"order__detail__money"},Te={class:"order__detail__totalFee"},Fe={class:"order__detail__bar"},Oe={class:"order__detail__needpay"},Re={class:"order__detail__unpay"},Je={class:"order__detail__requests"},Me={class:"order__detail__bar"},Ne=u(()=>s("span",{class:"order__detail__name"},"\u8BA2\u5355\u5907\u6CE8",-1)),Pe={key:0},We={key:1},qe=l("> "),Ee={key:0,class:"order__detail__bar"},Le=u(()=>s("span",{class:"order__detail__name"},"\u53D1\u7968\u62AC\u5934",-1)),Ve={class:"orderFoot"},je={class:"orderFoot__left"},Ue=l("\u4E0B\u5355\u5931\u8D25"),ze=u(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exclamation-circle-copy"})],-1)),Ge=l("\u8BF7\u5148\u767B\u5F55"),He=l("\u786E\u5B9A"),Ke={setup(i){const m=()=>{const t=R(),c=t.currentShopId,p=t.itemsObj[c],w=[];for(let A in p){const b=p[A];for(let I in b){const r=b[I];w.push({attrs:r.attrs||[],extra:r.extra||{},id:r.foodId,name:r.name,packing_fee:r.packing_fee,price:r.price,quantity:r.quantity,sku_id:r.sku_id,specs:[r.specs],stock:r.stock})}}return{store:t,currentShopId:c,arr:w}},{store:e,currentShopId:h,arr:v}=m(),y=async()=>{try{let t=await Cs({geohash:e.addressData.geohash,restaurant_id:h,entities:[v]});e.getOrderData(t)}catch(t){console.error(t)}};ms(()=>{y()});const S=()=>{const t=ks();return{router:t,goInvoice:()=>{t.push({name:"invoice"})},goReMark:()=>{t.push({name:"remark"})}}},{router:$,goInvoice:g,goReMark:f}=S(),M=()=>{let t=C(!1);return{showBlock:t,openBlock:()=>{t.value=!0},closeBlock:()=>{t.value=!1}}},{showBlock:xs,openBlock:N,closeBlock:Bs}=M();let T=C(!1);const $s=async()=>{if(!e.userData){P.value=!0;return}try{(await Ds({user_id:e.userData.user_id,cart_id:e.orderData.id,address_id:e.finalAddress.id,restaurant_id:e.orderData.restaurant_id,description:e.finalReMark,entities:e.orderData.cart.groups,geohash:""})).status===1?$.push({name:"payment"}):(T.value=!0,setTimeout(()=>{T.value=!1},3e3))}catch(t){console.error(t)}},As=()=>{let t=C(!1);return{ShowTip:t,closeJumpWindowFunc:()=>{t.value=!1}}},{ShowTip:P,closeJumpWindowFunc:Is}=As();return(t,c)=>{var p,w,A,b,I,r,W,q,E,L,V,j,U,z,G,H,K,Q,X,Y,Z,ss,es,os,ts,as,_s,ds,ns,rs,cs,is,ls,us,ps,hs,vs;return a(),d(B,null,[x(js),s("div",ee,[oe,s("div",te,[s("div",ae,[(A=(w=(p=o(e))==null?void 0:p.orderData)==null?void 0:w.cart)!=null&&A.is_address_too_far?D("",!0):(a(),d("span",_e,"\u5C3D\u5FEB\u9001\u8FBE")),de,s("span",ne,"\u9884\u8BA1"+_((I=(b=o(e))==null?void 0:b.orderData)==null?void 0:I.delivery_reach_time),1)]),s("div",re,[(q=(W=(r=o(e))==null?void 0:r.orderData)==null?void 0:W.cart)!=null&&q.is_deliver_by_fengniao?(a(),d("span",ce,"\u8702\u9E1F\u4E13\u9001")):D("",!0)])])]),s("div",ie,[s("div",le,[ue,s("span",{onClick:c[0]||(c[0]=(...n)=>o(N)&&o(N)(...n))},ve)]),fe]),s("div",ke,[s("div",me,[s("span",null,_((j=(V=(L=(E=o(e))==null?void 0:E.orderData)==null?void 0:L.cart)==null?void 0:V.restaurant_info)==null?void 0:j.name),1)]),s("div",ye,[(a(!0),d(B,null,O((H=(G=(z=(U=o(e))==null?void 0:U.orderData)==null?void 0:z.cart)==null?void 0:G.groups)==null?void 0:H[0],(n,Qe)=>(a(),d("div",ge,[s("span",we,_(n.name),1),s("span",be,"x"+_(n.quantity),1),s("span",xe,"\uFFE5"+_(parseInt(n.quantity)*parseInt(n.price)),1)]))),256))]),s("div",Be,[s("div",$e,[Ae,s("span",Ie,"\uFFE5"+_((X=(Q=(K=o(e))==null?void 0:K.orderData)==null?void 0:Q.cart)==null?void 0:X.deliver_amount),1)]),(a(!0),d(B,null,O((ss=(Z=(Y=o(e))==null?void 0:Y.orderData)==null?void 0:Z.cart)==null?void 0:ss.extra,n=>(a(),d("div",Ce,[s("span",De,_(n==null?void 0:n.name),1),s("span",Se,"\uFFE5"+_(n==null?void 0:n.price),1)]))),256))]),s("div",Te,[s("div",Fe,[s("span",Oe,"\u8BA2\u5355 \uFFE5"+_((ts=(os=(es=o(e))==null?void 0:es.orderData)==null?void 0:os.cart)==null?void 0:ts.total),1),s("span",Re,"\u5F85\u652F\u4ED8 \uFFE5"+_((ds=(_s=(as=o(e))==null?void 0:as.orderData)==null?void 0:_s.cart)==null?void 0:ds.total),1)])]),s("div",Je,[s("div",Me,[Ne,s("span",{class:"order__detail__intro",onClick:c[1]||(c[1]=(...n)=>o(f)&&o(f)(...n))},[o(e).finalReMark?(a(),d("span",Pe,_(o(e).finalReMark),1)):(a(),d("span",We,"\u53E3\u5473\u3001\u504F\u597D\u7B49")),qe])]),(cs=(rs=(ns=o(e))==null?void 0:ns.orderData)==null?void 0:rs.invoice)!=null&&cs.is_available?(a(),d("div",Ee,[Le,s("span",{class:"order__detail__intro",onClick:c[2]||(c[2]=(...n)=>o(g)&&o(g)(...n))},_((us=(ls=(is=o(e))==null?void 0:is.orderData)==null?void 0:ls.invoice)==null?void 0:us.status_text)+">",1)])):D("",!0)])]),s("div",Ve,[s("div",je,"\u5F85\u652F\u4ED8\uFFE5"+_((vs=(hs=(ps=o(e))==null?void 0:ps.orderData)==null?void 0:hs.cart)==null?void 0:vs.total),1),s("button",{class:"orderFoot__right",onClick:$s},"\u786E\u8BA4\u4E0B\u5355")]),(a(),F(fs,{to:"body"},[x(se,{show:o(xs),onCloseBlock:o(Bs)},null,8,["show","onCloseBlock"])])),x(ws,{show:o(T)},{content:k(()=>[Ue]),_:1},8,["show"]),(a(),F(fs,{to:"body"},[x(Rs,{onCloseJumpWindow:o(Is),show:o(P)},{icon:k(()=>[ze]),content:k(()=>[Ge]),button:k(()=>[He]),_:1},8,["onCloseJumpWindow","show"])]))],64)}}};var eo=J(Ke,[["__scopeId","data-v-045cff99"]]);export{eo as default};
